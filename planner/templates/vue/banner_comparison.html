<v-app>
    <!-- https://stackoverflow.com/questions/52819619/understand-rows-per-page-items-at-vuetify-data-iterators-data-tables-can-i-->
    <template>
        <template>
            <v-toolbar flat color="white">
                <v-toolbar-title>Course Offerings</v-toolbar-title>
                <v-spacer></v-spacer>
                <v-switch v-model="singleExpand" label="Single expand" class="mt-2"></v-switch>
            </v-toolbar>
        </template>
        <v-data-table :headers="headers" :items="courses" :single-expand="singleExpand" :expanded.sync="expanded"
            show-expand :page.sync="page" :items-per-page="itemsPerPage" hide-default-footer item-key="name"
            class="elevation-1" @page-count="pageCount = $event">
            <template v-slot:item="{ item, expand }">
                <tr>
                    <td>
                        <v-btn text @click="expand">Details</v-btn>
                    </td>
                    <td>[[item.semester]] </td>
                    <td>[[item.crn]] </td>
                    <td class="text-xs-left">[[item.number]]</td>
                    <td class="text-xs-left">[[item.name]] </td>
                    <td class="text-xs-center">
                        <v-icon class="green--text" v-if="!item.needsWork">mdi-check-circle</v-icon>
                        <v-icon class="orange--text" v-else>mdi-help-circle</v-icon>
                    </td>
                </tr>
            </template>
            <template v-slot:expanded-item="{ item, headers }">
                <td :colspan="headers.length" style="border-bottom: 1px solid grey;">

                    <v-container>





                        <template>
                            <div class="text-center">
                                <v-dialog persistent v-model="dialog" width="800">
                                    <v-card>
                                        <v-card-title class="headline grey lighten-2" primary-title>
                                            [[dialogTitle]]
                                        </v-card-title>
                                        <v-card-text>
                                            <v-container grid-list-md>
                                                <v-layout wrap>
                                                    <v-flex xs4>Day</v-flex>
                                                    <v-flex xs3>Begin Time (e.g., 13:00)</v-flex>
                                                    <v-flex xs3>End Time (e.g., 13:50)</v-flex>
                                                    <v-flex xs2>Delete</v-flex>
                                                </v-layout>
                                                <div v-for="meetingTimeDetail in editMeetings">
                                                    <v-layout wrap>
                                                        <v-flex xs4>

                                                            <select style="border-style: solid; height: 32px;"
                                                                id="day_select" v-model="meetingTimeDetail.day">
                                                                <option value="0">Monday</option>
                                                                <option value="1">Tuesday</option>
                                                                <option value="2">Wednesday</option>
                                                                <option value="3">Thursday</option>
                                                                <option value="4">Friday</option>
                                                            </select>
                                                        </v-flex>
                                                        <v-flex xs3>
                                                            <input style="height: 32px; width: 140px;" type="text"
                                                                v-model="meetingTimeDetail.begin_at">
                                                        </v-flex>
                                                        <v-flex xs3>
                                                            <input style="height: 32px; width: 140px;" type="text"
                                                                v-model="meetingTimeDetail.end_at">
                                                        </v-flex>
                                                        <v-flex xs2>
                                                            <input type="checkbox" v-model="meetingTimeDetail.delete">
                                                        </v-flex>
                                                    </v-layout>
                                                </div>
                                                <v-layout text-center>
                                                    <v-flex xs12>
                                                        <div class="red--text">
                                                            [[meetingFormErrorMessage]]</div>
                                                    </v-flex>
                                                </v-layout>
                                            </v-container>
                                        </v-card-text>
                                        <v-divider></v-divider>
                                        <v-card-actions>
                                            <v-spacer></v-spacer>
                                            <v-btn color="primary" text @click="cancelMeetingsForm()">
                                                Cancel
                                            </v-btn>
                                            <v-btn color="primary" text @click="submitMeetingsForm()">
                                                Submit
                                            </v-btn>
                                        </v-card-actions>
                                    </v-card>
                                </v-dialog>
                            </div>
                        </template>

                        <strong>[[item.name]]</strong>



                        <v-layout row wrap align-center>
                            <v-flex xs10 offset-xs1>

                                <table style="border: 1px solid grey; margin: 10px;">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th class="text-center">iChair</th>
                                            <th class="text-center">Registrar</th>
                                            <th class="text-center">Accept...</th>
                                            <th class="text-center">Message for Registrar</th>
                                            <th class="text-center">Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Meeting Times</td>
                                            <td v-if="item.hasIChair" class="text-center">
                                                <a @click="editMeetingTimes(item)">
                                                    <div v-for="meetingTime in item.ichair.meeting_times">
                                                        [[meetingTime]]
                                                    </div>
                                                </a>
                                            </td>
                                            <td v-else class="text-center">
                                                <a @click="addNewMeetingTimes(item)">
                                                    ---
                                                </a>
                                            </td>
                                            <td v-if="item.hasBanner" class="text-center">
                                                <div v-for="meetingTime in item.banner.meeting_times">
                                                    [[meetingTime]]
                                                </div>
                                            </td>
                                            <td v-else class="text-center">
                                                ---
                                            </td>
                                            <td class="text-center">
                                                <a @click="addNewMeetingTimes(item)">
                                                    iChair
                                                </a> |
                                                <a @click="addNewMeetingTimes(item)">
                                                    Registrar
                                                </a>
                                            </td>
                                            <td class="text-center"> change to: MW 9-9:50; R 11-11:35</td>
                                            <td class="text-center">
                                                <v-icon class="green--text">mdi-check-circle</v-icon>
                                            </td>

                                        </tr>
                                        <tr>
                                            <td>Instructor(s)</td>
                                            <td v-if="item.hasIChair" class="text-center">
                                                <a @click="editMeetingTimes(item)">
                                                    <div v-for="instructor in item.ichair.instructors">
                                                        [[instructor]]
                                                    </div>
                                                </a>
                                            </td>
                                            <td v-else class="text-center">
                                                <a @click="addNewMeetingTimes(item)">
                                                    ---
                                                </a>
                                            </td>
                                            <td v-if="item.hasBanner" class="text-center">
                                                <div v-for="instructor in item.banner.instructors">
                                                    [[instructor]]
                                                </div>

                                            </td>
                                            <td v-else class="text-center">
                                                ---
                                            </td>
                                            <td class="text-center">
                                                <a @click="addNewMeetingTimes(item)">
                                                    iChair
                                                </a> |
                                                <a @click="addNewMeetingTimes(item)">
                                                    Registrar
                                                </a>
                                            </td>
                                            <td></td>
                                            <td class="text-center">
                                                <v-icon>mdi-check-circle</v-icon>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>

                            </v-flex>
                        </v-layout>




                    </v-container>

                </td>
            </template>
        </v-data-table>
        <div class="text-center pt-2">
            <v-pagination v-model="page" :length="pageCount"></v-pagination>
            <v-btn v-if="!showAllCourses" color="primary" @click.stop="showAll()">Show All</v-btn>
            <!-- example: https://www.tremblant.ca/things-to-do/activities#filters=seasons:Summer -->
            <v-btn v-else color="primary" @click.stop="showFewer()">Show Fewer</v-btn>
            <!--
            <v-text-field
                :value="itemsPerPage"
                label="Items per page"
                type="number"
                min="-1"
                max="15"
                @input="itemsPerPage = parseInt($event, 10)"
            ></v-text-field>
            -->
        </div>
    </template>
</v-app>