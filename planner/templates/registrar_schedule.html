{% extends base_html %}
{% block extrahead %}
{% endblock %}
{% block content %}

<style type="text/css">

  @font-face {
  font-weight: bold;
  }
  
  
  @page {
  size: {{ pagesize }};
  margin: 1.5cm;
  @frame footer {
  -pdf-frame-content: footerContent;
  bottom: 0cm;
  margin-left: 10.3cm;
  margin-right: 9cm;
  height: 1.5cm;
  }
  
  }
</style>

<style>
  .alert-student-info {
	  width: 100%!important;
  }
</style>



{% if printer_friendly %}

<style>
  table {
  border: 1px solid #666666;
  border-collapse:collapse;
  border-color:#ccc;
  }
  td, th {
  padding-top: 3px;
  padding-left: 2px;
  padding-right: 2px;
  padding-bottom: -1px;
  margin: 0px;
  }
</style>

{% if font_size_large %}
<style>
  td, th {
  font-size: 12px;
  }
</style>
{% endif %}

        <div id="footerContent">
            {%block page_foot%}
                Page <pdf:pagenumber>
            {%endblock%}
        </div>
{% endif %}

{% if not printer_friendly %}

<div class="span3">
	<div style="padding-bottom: 10px">
		<a class="btn btn-info" href="{% url 'update_year_to_view' id %}?next={{ request.path|urlencode }}">
				Change Academic Year</a>
	</div>
	<div style="padding-bottom: 20px" class="btn-group">
    <a class="btn btn-info dropdown-toggle" data-toggle="dropdown" href="#">
      Printer Friendly Version
      <span class="caret"></span>
    </a>
      <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
        <li>              
          <a href="{% url 'registrar_schedule' 1 %}" target="_blank"> Small Font </a>
        </li>
        <li>              
          <a href="{% url 'registrar_schedule' 2 %}" target="_blank"> Larger Font </a>
        </li>
      </ul>
  </div> {# btn-group #}
</div>
<div class="span6">
	{% if can_edit %}
		<div class="content-center">
			<div style="margin-top: 25px; padding: 0px 2px 2px 2px">
				<a href="{% url 'select_course' %}?next={{ request.path|urlencode }}">
					Add </a> a course offering manually.
			</div>
			<div style="padding: 2px 2px 8px 2px"> <a href="{% url 'choose_year_course_copy' %}?next={{ request.path|urlencode }}">
					Copy</a> one or more course offerings from a previous year.
			</div>
		</div>
	{% else %}<br>
	{% endif %}
</div>

{% if faculty_time_conflicts %}
	
	<div id="message-about-errors" class="span4 offset1">
		<div class="alert alert-student-info">  
			<a style="padding-right: 10px;" class="close" data-dismiss="alert" onclick="hideMessageAboutErrors()">×</a>  
			<div><strong>*Note:</strong> There are some time or room conflicts.  To view these conflicts, click 
			<strong><a style="cursor: pointer;" onclick="unhideErrorMessages()">here</a></strong>.
			</div>   
		</div>   
	</div>
	
{% endif %}

<div id="error-messages" style="display: none;" class="span8 offset2">
	<div class="alert alert-student-info">  
		<a style="padding-right: 20px;" class="close" data-dismiss="alert" onclick="hideErrorMessages()">×</a>  
		<ul>
		{% for semester_message in faculty_time_conflicts %}
			<li> <strong>{{ semester_message.semester }}:</strong>
				<ul>
				{% for error in semester_message.error_messages %}
					<li>
						{{error}}
					</li>
				{% endfor %}
				</ul>
			</li>
		{% endfor %}
		</ul>
	</div>
</div>




{% endif %}

<div class="content-center">
  
<table class="table table-striped table-bordered table-hover">
	     <thead>
	       <tr>
		 {% if not printer_friendly %}
		 <th colspan="6">Courses</th>
		 {% else %}
		 <th colspan="8">Master Schedule for {{department}} ({{academic_year}})</th>
		 <div></div>
		 {% endif %}
		</tr>
	       <tr>
		 {% if not printer_friendly %}
		 <th> Sem - Frac</th>
		 <th>CRN</th>
		 <th> Number </th>
		 <th> Name </th>
		 <th style="text-align: center"> Cr Hrs </th>
		 <th style="text-align: center"> Enrl Cap </th>
		 <th style="text-align: center"> Times </th>
		 <th style="text-align: center"> Room(s) </th>
		 <th style="text-align: center"> Instructor(s) [load] </th>
		 <th style="text-align: center"> Comments</th>
		 {% if can_edit %} <th></th> {% endif %}
		 {% else %}
		 <th style="width:13%;"> Semester - Fraction</th>
		 <th style="width:6%;">  CRN </th>
		 <th style="width:9%;">  Number </th>
		 <th style="width:20%;"> Name </th>
		 <th style="text-align: center; width:7%;"> Cr Hrs </th>
		 <th style="text-align: center; width:7%;"> Enrl Cap </th>
		 <th style="text-align: center; width:13%;"> Times </th>
		 <th style="text-align: center; width:10%;"> Room(s) </th>
		 <th style="text-align: center; width:15%;"> Instructor(s) [load] </th>
	       {% endif %}
	       </tr>
	     </thead>
	     <tbody>
{% for course in registrar_data_list %}
    <tr>
      <td> 
	{% if not printer_friendly and can_edit %}
	  <a href="{% url 'update_semester_for_course_offering' course.course_offering_id %}?next={{ request.path|urlencode }}">{{course.semester}} - {{course.semester_fraction}}</a>
	{% else %} 
	  {{course.semester}} - {{course.semester_fraction}}
        {% endif %}
      </td>
	  <td>
		{% if course.crn != None %}
	   		{{course.crn}}
	   {% endif %}
	  </td>
      <td>
	{% if not printer_friendly and can_edit %}
	<a href="{% url 'update_course' course.course_id %}?next={{ request.path|urlencode }}">{{course.number}}</a>
	   {% else %} {{course.number}} {% endif %}
      </td>
      <td> {{course.name}}</td>
      <td style="text-align: center"> {% if not printer_friendly and can_edit %}
	<a href="{% url 'update_course' course.course_id %}?next={{ request.path|urlencode }}">{{course.credit_hours}}</a>
           {% else %} {{course.credit_hours}} {% endif %}
      </td>
      <td style="text-align: center"> {% if not printer_friendly and can_edit %}
	<a href="{% url 'update_course_offering' course.course_offering_id 0 %}?next={{ request.path|urlencode }}">{{course.cap}}</a>
	   {% else %} {{course.cap}} {% endif %}
      </td>
      <td style="{% if not course.meetings_scheduled %}background-color: #f2dede; {% endif %} text-align: center">
      {% for meeting in course.meeting_times_list %}
	<div>
	  {% if course.meetings_scheduled %}
	  {% if not printer_friendly and can_edit %}
	  <a href="{% url 'update_class_schedule' course.course_offering_id 0 %}?next={{ request.path|urlencode }}">
	    {{meeting}}</a>
	  {% else %} {{meeting}} {% endif %}
	  {% else %}
	  {% if not printer_friendly and can_edit %}
    <a href="{% url 'new_class_schedule' course.course_offering_id 0 %}">
      {{meeting}}</a>
	  {% else %} {{meeting}} {% endif %}
	  {% endif %}
	</div>
	{% endfor %}
      </td>
      <td style="{% if not course.meetings_scheduled %}background-color: #f2dede; {% endif %} text-align: center">
      {% for room in course.room_list %}
	<div>
	  {% if not printer_friendly and can_edit %}
	  <a href="{% url 'update_class_schedule' course.course_offering_id 0 %}?next={{ request.path|urlencode }}">
	    {{room}}</a>
	  {% else %} {{room}} {% endif %}
	</div>
	{% endfor %}
      </td>
      <td style="{% if not course.loads_OK %}background-color: #f2dede; {% endif %} text-align: center"> 
	{% for instructor in course.instructor_list %}
	<div>
	  {% if not printer_friendly and can_edit %}
	  <a href="{% url 'update_course_offering' course.course_offering_id 0 %}?next={{ request.path|urlencode }}">
	    {{instructor}}</a>
	  {% else %} {{instructor}} {% endif %}
	</div>
	{% endfor %}
      </td>

	  {% if not printer_friendly %}
      {% if can_edit %}
      <td style="text-align: center;"> <a href="{% url 'update_course_offering' course.course_offering_id 0 %}?next={{ request.path|urlencode }}">{{course.comment}}</a>  </td>
	  {% else %}
	  <td style="text-align: center;">{{course.comment}}</td>
	  {% endif %}
      {% endif %}

      {% if not printer_friendly %}
      {% if can_edit %}
      <td title = "Delete this course offering" style="text-align: center;"> <a href="{% url 'delete_course_offering' course.course_offering_id %}?next={{ request.path|urlencode }}">Delete</a>  </td>
      {% endif %}
      {% endif %}
    </tr>
{% endfor %}
</tbody>

</table>
</div>

<script>


function unhideErrorMessages() {
	document.getElementById('error-messages').style.display = 'block';
	console.log('got here');
	document.getElementById('message-about-errors').style.display = 'none';
};

function hideErrorMessages() {
	document.getElementById('error-messages').style.display = 'none';
};

function hideMessageAboutErrors() {
	document.getElementById('message-about-errors').style.display = 'none';
};


	
</script>





  <script>
    $(window).load(function(){
    $("#nav-registrarsummary").addClass("current");
    $('.page-name').find('h1').replaceWith('<h1>Master Schedule View</h1> <h2>{{department}}, {{academic_year}}</h2>');
    $(".page-name").stop().animate({opacity: 1,'margin-left': '5%'}, 700);});
  </script>


{% endblock %}
